<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>REWARD (RWD)</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
body { margin:0; font-family:'Inter',sans-serif; background:#0b0f14; color:#e6e6e6; }
header { padding:80px 20px; text-align:center; background:radial-gradient(circle at top, #1a3cff33, #0b0f14 70%); }
header h1 { font-size:3rem; margin-bottom:10px; }
header p { font-size:1.2rem; opacity:.85; }
.section { padding:70px 20px; max-width:1100px; margin:auto; }
.card { background:#111827; border-radius:16px; padding:30px; box-shadow:0 0 40px #00000055; margin-bottom:30px; }
.grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:20px; }
.badge { display:inline-block; padding:6px 14px; border-radius:999px; background:#1a3cff; font-size:.85rem; margin-bottom:15px; }
button { background:#1a3cff; color:white; border:none; padding:14px 26px; border-radius:12px; font-size:1rem; cursor:pointer; }
button:disabled { opacity:.5; cursor:not-allowed; }
#rewardValue { font-size:2rem; font-weight:800; margin:15px 0; }
iframe { width:100%; height:480px; border:none; border-radius:16px; }
footer { text-align:center; padding:40px; opacity:.6; font-size:.85rem; }
</style>
</head>
<body>
<header>
  <span class="badge">Earn WPEPU by Holding</span>
  <h1>REWARD (RWD)</h1>
  <p>The degen reward token that pays you in WPEPU.</p>
</header>

<section class="section">
  <div class="grid">
    <div class="card"><h3>Buy Tax</h3><p>10%</p><p>5% Rewards<br>5% Dev</p></div>
    <div class="card"><h3>Sell Tax</h3><p>20%</p><p>100% Rewards</p></div>
    <div class="card"><h3>Supply</h3><p>1,000,000,000 RWD</p></div>
    <div class="card"><h3>Rewards</h3><p>WPEPU</p></div>
  </div>
</section>

<section class="section">
  <div class="card">
    <h2>Live Chart</h2>
    <iframe src="https://www.geckoterminal.com/eth/pools/0xb1b10b05aa043dd8d471d4da999782bc694993e3ecbe8e7319892b261b412ed5?embed=1"></iframe>
  </div>
</section>

<section id="claim" class="section">
  <div class="card">
    <h2>Claim Your WPEPU Rewards</h2>
    <p>Rewards accumulate automatically. Claim them whenever you want.</p>

    <div id="rewardValue">â€” WPEPU</div>

    <button id="connectWallet">Connect Wallet</button>
    <button id="claimRewards" disabled>Claim Rewards</button>

    <p id="claimStatus"></p>
  </div>
</section>

<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.min.js"></script>
<script>
let provider;
let signer;
let contract;

const contractAddress = "0x49ef1deD412f91c06030047e7DA92034066C4127";

const abi = [
  "function withdrawableRewardOf(address) view returns (uint256)",
  "function withdrawReward()",
];

const connectBtn = document.getElementById("connectWallet");
const claimBtn = document.getElementById("claimRewards");
const rewardValue = document.getElementById("rewardValue");
const statusText = document.getElementById("claimStatus");

async function connectWallet() {
  if (!window.ethereum) {
    alert("MetaMask not detected");
    return;
  }

  await window.ethereum.request({ method: "eth_requestAccounts" });

  provider = new ethers.providers.Web3Provider(window.ethereum);
  signer = provider.getSigner();
  contract = new ethers.Contract(contractAddress, abi, signer);

  connectBtn.innerText = "Wallet Connected";
  connectBtn.disabled = true;

  refreshRewards();
}

async function refreshRewards() {
  const user = await signer.getAddress();
  const rewards = await contract.withdrawableRewardOf(user);
  const formatted = ethers.utils.formatUnits(rewards, 18);

  if (rewards.eq(0)) {
    rewardValue.innerText = "0 WPEPU";
    statusText.innerText = "No rewards to claim";
    claimBtn.disabled = true;
  } else {
    rewardValue.innerText = formatted + " WPEPU";
    statusText.innerText = "";
    claimBtn.disabled = false;
  }
}

async function claimRewards() {
  try {
    claimBtn.disabled = true;
    statusText.innerText = "Claiming rewards...";

    const tx = await contract.withdrawReward();
    await tx.wait();

    statusText.innerText = "Rewards claimed!";
    refreshRewards();
  } catch (e) {
    statusText.innerText = "Claim failed";
    claimBtn.disabled = false;
  }
}

connectBtn.onclick = connectWallet;
claimBtn.onclick = claimRewards;
</script>

</body>
</html>
